import canvasUrlFromImage from 'ember-rasterize/utils/canvas-url-from-image';
import { module, test } from 'qunit';

module('Unit | Utility | canvas url from image');

const sampleImageEl = () => {
  const img = document.createElement('img');
  img.src = `data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22240%22%20height%3D%22240%22%20style%3D%22%22%3E%0A%3Cpath%20fill%3D%22%23F8D64E%22%20d%3D%22m48%2C234%2073-226%2073%2C226-192-140h238z%22%20style%3D%22%22%2F%3E%0A%3C%2Fsvg%3E`;

  return img;
};
const sampleEncodedImage = `data:image/png;base64,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`;

test('it converts an image element to a base64 encoded image', function(assert) {
  assert.expect(1);

  const result = canvasUrlFromImage(sampleImageEl());

  assert.equal(
    result,
    sampleEncodedImage,
    'image element should be base64 encoded'
  );
});
